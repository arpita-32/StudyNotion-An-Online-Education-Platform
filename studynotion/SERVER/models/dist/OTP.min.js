"use strict";var mongoose=require("mongoose"),mailSender=require("../utils/mailSender"),OTPSchema=new mongoose.Schema({email:{type:String,required:!0},otp:{type:String,required:!0},createdAt:{type:Date,default:Date.now,expires:300}});function sendVerificationEmail(r,t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(mailSender(r,"Verification Email from StudyNotion","<h1>Please verify your email</h1>\n            <p>Your OTP for verification is: ".concat(t,"</p>\n            <p>This OTP is valid for 5 minutes</p>")));case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log("Error occurred while sending verification email:",e.t0),e.t0;case 11:case"end":return e.stop()}},null,null,[[0,7]])}OTPSchema.pre("save",function(r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(sendVerificationEmail(this.email,this.otp));case 3:r(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r(e.t0);case 9:case"end":return e.stop()}},null,this,[[0,6]])}),module.exports=mongoose.model("OTP",OTPSchema);
//# sourceMappingURL=OTP.min.js.map

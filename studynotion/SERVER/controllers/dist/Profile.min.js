"use strict";var Profile=require("../models/Profile"),User=require("../models/User");exports.updateProfile=function(r,t){var s,n,a,u,c,i,o,d,l,p,f;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=r.body,n=s.dateOfBirth,a=void 0===n?"":n,u=s.about,c=void 0===u?"":u,i=s.contactNumber,o=s.gender,d=r.user.id,i&&o&&d){e.next=5;break}return e.abrupt("return",t.status(400).json({success:!1,message:"All fields are required"}));case 5:return e.next=7,regeneratorRuntime.awrap(User.findById(d));case 7:return l=e.sent,p=l.additionalDetails,e.next=11,regeneratorRuntime.awrap(Profile.findById(p));case 11:return(f=e.sent).dateOfBirth=a,f.about=c,f.gender=o,f.contactNumber=i,e.next=18,regeneratorRuntime.awrap(f.save());case 18:return e.abrupt("return",t.status(200).json({success:!0,message:"profile updated successfully",profileDetails:f}));case 21:return e.prev=21,e.t0=e.catch(0),e.abrupt("return",t.status(500).json({success:!1,error:e.t0.message}));case 24:case"end":return e.stop()}},null,null,[[0,21]])},exports.deleteAccount=function(r,t){var s,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r.user.id,e.next=4,regeneratorRuntime.awrap(User.findById(s));case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",t.status(404).json({success:!1,message:"user not found"}));case 7:return e.next=9,regeneratorRuntime.awrap(Profile.findByIdAndDelete({_id:n.additionalDetails}));case 9:return e.next=11,regeneratorRuntime.awrap(User.findByIdAndDelete({_id:s}));case 11:return e.abrupt("return",t.status(200).json({success:!0,message:"User deleted successfully",updatedSection:updatedSection}));case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",t.status(500).json({success:!1,message:"user cannot be deleted"}));case 17:case"end":return e.stop()}},null,null,[[0,14]])},exports.getAllUserDetails=function(r,t){var s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r.user.id,e.next=4,regeneratorRuntime.awrap(User.findById(s).populate("additionalDeails").exec());case 4:return e.sent,e.abrupt("return",t.status(200).json({success:!0,message:"User data fetched successfully"}));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",t.status(500).json({success:!1,message:e.t0.message}));case 11:case"end":return e.stop()}},null,null,[[0,8]])};
//# sourceMappingURL=Profile.min.js.map
